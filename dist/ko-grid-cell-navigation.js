/*
 Copyright (c) 2015, Ben Schulz
 License: BSD 3-clause (http://opensource.org/licenses/BSD-3-Clause)
*/
function q(h,l){return function(m){return m}(function(m,h,n){var l=[38,37,39,40,9,13];n.defineExtension("ko-grid-cell-navigation",{s:function(h){h.before("table").insert('<textarea class="ko-grid-focus-parking" tabIndex="-1" style="position: absolute; z-index: 10; overflow: hidden; box-sizing: border-box; width: 1em; height: 1em; top: -3em; left: -3em; resize: none; border: none;"></textarea>')},q:function(m,n,g){function e(b,a,c){c=!!c;var d=g.data.rows.displayed(),f=g.columns.displayed();b=void 0+
b;a=f.indexOf(r)+a;c&&0>a?(--b,a=f.length-1):c&&a>=f.length&&(b+=1,a=0);a=Math.max(0,Math.min(f.length-1,a));b=Math.max(0,Math.min(d.length-1,b));t(d.get(b),f[a])}function t(b,a){p&&p.release();r=a;var c=g.data.lookupCell(b,a);p=c.hijack("focused");var e=c.element,c=d.getBoundingClientRect(),f=e.getBoundingClientRect(),e=Math.min(0,f.left-c.left-7)||Math.max(0,f.right-c.right+7+(d.offsetWidth-d.clientWidth)),c=Math.min(0,f.top-c.top-7)||Math.max(0,f.bottom-c.bottom+7);d.scrollLeft+=e;d.scrollTop+=
c;k.focus();k.value=a.renderValue(h.unwrap(b[a.property]));k.setSelectionRange(0,k.value.length)}var d=null,k=null,r=null,p=null;g.postApplyBindings(function(){d=g.element.querySelector(".ko-grid-table-scroller");k=g.element.querySelector(".ko-grid-focus-parking")});g.data.onCellClick(function(b,a,c,d){return t(c,d)});g.rootElement.addEventListener("keydown",function(b){if(!(0>l.indexOf(b.keyCode))){b.preventDefault();var a=b.shiftKey?-1:1;switch(b.keyCode){case 38:return e(-1,0);case 37:return e(0,
-1);case 39:return e(0,1);case 40:return e(1,0);case 9:return e(0,a,!0);case 13:return e(a,0)}}})}});return n.declareExtensionAlias("cellNavigation","ko-grid-cell-navigation")}({},l,h))}"function"===typeof define&&define.amd?define(["ko-grid","knockout","ko-data-source","ko-indexed-repeat"],q):window["ko-grid-cell-navigation"]=q(window.ko.bindingHandlers.grid,window.ko);